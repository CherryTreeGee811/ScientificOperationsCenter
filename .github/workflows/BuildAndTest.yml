name: ScientificOperationsCenter
on:
   push:
       branches:
           - '*'
   pull_request:
       branches:
           - '*'
   workflow_dispatch:
       inputs:
           branch:
               description: 'The branch to build'
               required: true
jobs:
   BuildAndTest:
      runs-on: ubuntu-latest
      steps:
          - uses: actions/checkout@v3
         
          - name: Build App Container
            shell: bash
            run: docker build --rm -t cherrytreegee811/scientificoperationscenter:dev ScientificOperationsCenter

          - name: Run Tests
            shell: bash
            run: |
              docker run --rm -d cherrytreegee811/scientificoperationscenter:dev  
              sleep 10
              docker exec cherrytreegee811/scientificoperationscenter:dev dotnet test ./ScientificOperationsCenter.Tests/ScientificOperationsCenter.Tests.csproj -c Release --verbosity normal
              docker stop cherrytreegee811/scientificoperationscenter:dev
